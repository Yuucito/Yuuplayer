<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Generador de Reproductor</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1em;
      background: #111;
      color: #fff;
    }
    label, input, textarea, button {
      display: block;
      width: 100%;
      margin-bottom: 1em;
    }
    input, textarea {
      padding: 0.5em;
      background: #222;
      border: 1px solid #555;
      color: #fff;
    }
    button {
      background: #00aaff;
      color: white;
      border: none;
      padding: 0.75em;
      cursor: pointer;
    }
    iframe {
      margin-top: 2em;
      width: 100%;
      height: 400px;
      border: 1px solid #333;
    }
  </style>
</head>
<body>
  <h1>ğŸ¬ Generador de Reproductor con Anuncios</h1>

  <label for="adTag">ğŸ“¢ URL del Anuncio VAST XML</label>
  <input type="text" id="adTag" placeholder="Ejemplo: https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/1234567/video_ads_samples/skippable&..." />

  <label for="mainVideo">ğŸï¸ URL del Video Principal (MP4 o M3U8)</label>
  <input type="text" id="mainVideo" value=" https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8 " />

  <label for="directLink">ğŸ”— Enlace Directo despuÃ©s de Anuncios</label>
  <input type="text" id="directLink" placeholder="Ejemplo: https://plusanime.com " />

  <button onclick="generar()">ğŸš€ Generar Reproductor</button>

  <label for="embedCode">ğŸ”§ CÃ³digo Embed</label>
  <textarea id="embedCode" rows="5" readonly></textarea>

  <iframe id="preview" allowfullscreen></iframe>

  <script>
    function generar() {
      const adTag = encodeURIComponent(document.getElementById('adTag').value.trim());
      const main = encodeURIComponent(document.getElementById('mainVideo').value.trim());
      const direct = encodeURIComponent(document.getElementById('directLink').value.trim());

      // ValidaciÃ³n bÃ¡sica
      if (!adTag || !main) {
        alert("Por favor completa todos los campos obligatorios.");
        return;
      }

      // AsegÃºrate de que esta URL apunte correctamente a player.html
      const src = `player.html?adTag=${adTag}&main=${main}&direct=${direct}`;

      // Verifica que el archivo exista y sea accesible
      fetch('player.html')
        .then(response => {
          if (response.status === 200 || response.status === 0) {
            // Archivo existe (0 es vÃ¡lido si se carga localmente)
            document.getElementById('preview').src = src;
            document.getElementById('embedCode').value = `<iframe src="${src}" width="100%" height="400" allowfullscreen frameborder="0"></iframe>`;
          } else {
            alert("âŒ No se encontrÃ³ el archivo 'player.html'. AsegÃºrate de tenerlo en la misma carpeta.");
          }
        })
        .catch(err => {
          console.error(err);
          alert("âŒ Error al cargar 'player.html'. AsegÃºrate de que exista y estÃ© accesible.");
        });
    }
  </script>
</body>
</html>
